<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>تبریک فانتزی</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent1:linear-gradient(135deg,#ff8a00,#ffd200);
    }
    html,body{height:100%;margin:0;font-family:'Vazirmatn',system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background: radial-gradient(1200px 600px at 10% 10%, rgba(255,140,0,0.06), transparent), radial-gradient(900px 400px at 90% 90%, rgba(96,165,250,0.03), transparent), var(--bg); color:#e6eef8}
    .app{min-height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:32px;box-sizing:border-box}

    .card{width:100%;max-width:720px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:20px;padding:48px;box-shadow:0 10px 30px rgba(2,6,23,0.7);position:relative;overflow:hidden}

    .center{display:flex;align-items:center;justify-content:center;height:240px}

    .fancy-btn{appearance:none;border:0;width:120px;height:120px;border-radius:50%;font-size:0;cursor:pointer;position:relative;background:linear-gradient(90deg,#7c3aed,#06b6d4);color:white;box-shadow:0 8px 30px rgba(99,102,241,0.18), inset 0 -4px 10px rgba(0,0,0,0.2);transition:transform .18s ease,box-shadow .18s easeappearance:none;border:0;padding:18px 34px;border-radius:999px;font-weight:700;font-size:20px;cursor:pointer;position:relative;background:linear-gradient(90deg,#7c3aed,#06b6d4);color:white;box-shadow:0 8px 30px rgba(99,102,241,0.18), inset 0 -4px 10px rgba(0,0,0,0.2);transition:transform .18s ease,box-shadow .18s ease}
    .fancy-btn:active{transform:translateY(2px)}
    .fancy-btn .shine{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:999px;pointer-events:none;background:linear-gradient(90deg, rgba(255,255,255,0.15), rgba(255,255,255,0) 40%);mix-blend-mode:overlay;}

    /* reveal area */
    .reveal{position:relative;padding:24px 12px 8px 12px;min-height:180px;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .message{opacity:0;transform:translateY(12px) scale(.98);transition:all .6s cubic-bezier(.2,.9,.3,1);text-align:center}
    .message.show{opacity:1;transform:translateY(0) scale(1)}

    .headline{font-size:40px;line-height:1.05;margin:4px 0;font-weight:800;letter-spacing:0.6px}
    .sub{font-size:24px;margin-top:6px;font-weight:600;color:#e6eef8}

    /* طلایی کردن خاله */
    .khaleh{display:inline-block;padding:6px 12px;border-radius:10px;font-weight:900;font-size:48px;background:linear-gradient(90deg,#ffd24d 0%,#ffb703 40%,#ffd24d 100%);-webkit-background-clip:text;background-clip:text;color:transparent;position:relative}
    .khaleh::after{content:'';position:absolute;inset:0;border-radius:10px;filter:blur(12px);opacity:.5;background:linear-gradient(90deg, rgba(255,210,77,0.6), rgba(255,183,3,0.4));z-index:-1}

    /* sparkles */
    .sparkles{position:absolute;inset:0;pointer-events:none}
    .sparkle{position:absolute;width:8px;height:8px;border-radius:50%;opacity:0;transform:scale(0);}

    /* confetti canvas */
    #confetti{position:fixed;left:0;right:0;top:0;bottom:0;pointer-events:none;z-index:50;}

    /* bottom credit */
    .credit{margin-top:28px;text-align:center;color:#cfe8ff;font-weight:600}

    /* small screens */
    @media (max-width:520px){.headline{font-size:30px}.khaleh{font-size:36px}}
  #meteorCanvas{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:60;}
</style>
</head>
<body>
  <div class="app">
    <div class="card" role="main">
      <div class="center">
        <button class="fancy-btn" id="openBtn" aria-haspopup="dialog" aria-controls="greeting">
          
          <span class="shine" aria-hidden="true"></span>
        </button>
      </div>

      <div class="reveal" id="greeting" aria-live="polite">
        <div class="message" id="messageBlock">
          <div class="headline"><span class="khaleh" id="khalehText">خاله</span></div>
          <div class="sub" id="subText">جون روزت مبارک</div></div></div>

<canvas id="meteorCanvas"></canvas>

      <div class="credit">از طرف عرفان</div>

      
      <div class="sparkles" id="sparkles"></div>
    </div>
  </div>

  <script>
    // helper: create sparkle elements
    const sparklesEl = document.getElementById('sparkles');
    function makeSparkles(){
      sparklesEl.innerHTML='';
      for(let i=0;i<24;i++){
        const s=document.createElement('div');
        s.className='sparkle';
        s.style.background='radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,235,173,1) 40%, rgba(255,183,3,0.8) 100%)';
        s.style.left = Math.random()*100+'%';
        s.style.top = Math.random()*100+'%';
        s.style.width = (6+Math.random()*10)+'px';
        s.style.height = s.style.width;
        sparklesEl.appendChild(s);
      }
    }
    makeSparkles();

    // animate sparkles
    function animateSparkles(){
      const nodes = document.querySelectorAll('.sparkle');
      nodes.forEach((n,i)=>{
        const delay = Math.random()*600;
        n.animate([
          {opacity:0, transform:'scale(0) rotate(0deg)'},
          {opacity:1, transform:'scale(1) rotate(45deg)'},
          {opacity:0, transform:'scale(0.2) rotate(90deg)'}
        ],{duration:800+Math.random()*900,delay:delay,iterations:1,easing:'cubic-bezier(.2,.9,.3,1)'});
      });
    }

    // confetti simple implementation
    );
      }
      let alive=true;
      function frame(){
        ctx.clearRect(0,0,c.width,c.height);
        pieces.forEach(p=>{
          p.x += Math.sin((p.y/20)+p.ax)*2 + p.ax*10;
          p.y += p.vy;
          p.r += p.vy*0.6;
          ctx.save();
          ctx.translate(p.x,p.y);
          ctx.rotate(p.r* Math.PI/180);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
          ctx.restore();
        });
        if(pieces.some(p=>p.y < c.height+50)) requestAnimationFrame(frame); else alive=false;
      }
      requestAnimationFrame(frame);
      // stop after a while
      setTimeout(()=>{ctx.clearRect(0,0,c.width,c.height)},3500);
    }

    // meteor effect
const meteorCanvas=document.getElementById('meteorCanvas');
const mCtx=meteorCanvas.getContext('2d');
function resizeMeteor(){meteorCanvas.width=innerWidth;meteorCanvas.height=innerHeight;}resizeMeteor();window.addEventListener('resize',resizeMeteor);
function shootMeteor(){
  const xStart=Math.random()*innerWidth;
  let x=xStart, y=-50, len=180, speed=12;
  function frame(){
    mCtx.clearRect(0,0,innerWidth,innerHeight);
    mCtx.strokeStyle='rgba(255,220,120,0.9)';
    mCtx.lineWidth=3;
    mCtx.beginPath();
    mCtx.moveTo(x,y);
    mCtx.lineTo(x-len*0.6,y-len);
    mCtx.stroke();
    x+=speed; y+=speed;
    if(y<innerHeight+100) requestAnimationFrame(frame);
  }
  frame();
}
// type / reveal animation for text
    const openBtn = document.getElementById('openBtn');
    const message = document.getElementById('messageBlock');
    const khaleh = document.getElementById('khalehText');
    const sub = document.getElementById('subText');

    function doReveal(){
      // tiny scale pop on button
      openBtn.animate([{transform:'scale(1)'},{transform:'scale(0.94)'},{transform:'scale(1)'}],{duration:260,easing:'ease-out'});

      // prepare
      message.classList.remove('show');
      khaleh.style.opacity=0; sub.style.opacity=0;

      // show message container
      setTimeout(()=>{
        message.classList.add('show');
        // khalkah golden shimmer
        khaleh.animate([
          {filter:'drop-shadow(0 0 0 rgba(255,210,77,0))',transform:'translateY(6px) scale(.98)'},
          {filter:'drop-shadow(0 10px 18px rgba(255,180,0,0.28))',transform:'translateY(0) scale(1)'}
        ],{duration:650,easing:'cubic-bezier(.2,.9,.3,1)'});
        // text shine loop
        const shine = khaleh.animate([
          {backgroundPosition:'0% 0%'},{backgroundPosition:'100% 0%'},{backgroundPosition:'0% 0%'}
        ],{duration:2200,iterations:2});
        khaleh.style.opacity=1;

        // sub text reveal
        setTimeout(()=>{ sub.animate([{opacity:0,transform:'translateY(8px)'},{opacity:1,transform:'translateY(0)'}],{duration:600,easing:'cubic-bezier(.2,.9,.3,1)'}); sub.style.opacity=1; },360);

        // sparkles and confetti
        setTimeout(()=>{ animateSparkles();  },420);
      },120);
    }

    openBtn.addEventListener('click',()=>{
      doReveal();
    });

    // allow pressing Enter/Space when focused
    openBtn.addEventListener('keydown',(e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); doReveal(); } });

    // resize confetti canvas with layout changes
    function resizeCanvas(){
      const c = document.getElementById('confetti');
      c.width = c.offsetWidth; c.height = c.offsetHeight;
    }
    window.addEventListener('resize',resizeCanvas);
    resizeCanvas();
  </script>
</body>
</html>
